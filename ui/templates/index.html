<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>URL Manager</title>
    <link rel="stylesheet" href="styles.css" />
    <script>
      let urlData = {{ url_data }};
    </script>
  </head>
  <body>
    <!-- Password Protection Modal -->
    <div id="passwordModal" class="password-modal">
      <div class="password-modal-content">
        <h2>Access Required</h2>
        <p>To access this application, please solve the following:</p>
        <div class="password-challenge">
          <p>
            <span id="challengeNumber" class="challenge-number"></span>
          </p>
        </div>
        <form id="passwordForm">
          <div class="form-group">
            <label for="passwordInput">Enter your answer:</label>
            <input type="number" id="passwordInput" required autofocus />
          </div>
          <div class="form-actions">
            <button type="submit" class="btn btn-primary">Enter</button>
          </div>
        </form>
        <div id="passwordError" class="password-error" style="display: none">
          Incorrect answer. Please try again.
        </div>
      </div>
    </div>

    <div class="container" id="mainContent" style="display: none">
      <header>
        <h1>URL Manager</h1>
        <div class="header-actions">
          <select id="tableSelector" class="table-selector">
            <!-- Table options will be added dynamically -->
          </select>
          <button id="addRecordBtn" class="btn btn-primary">Add New URL</button>
        </div>
      </header>

      <main id="tablesContainer">
        <!-- Tables will be added here dynamically -->
      </main>

      <!-- Modal for adding/editing records -->
      <div id="recordModal" class="modal">
        <div class="modal-content">
          <span class="close-btn">&times;</span>
          <h2 id="modalTitle">Add New URL</h2>
          <form id="recordForm">
            <input type="hidden" id="recordId" />
            <input type="hidden" id="tableIndex" />
            <div class="form-group">
              <label for="active">Active:</label>
              <input type="checkbox" id="active" checked />
            </div>
            <div class="form-group">
              <label for="source">Source:</label>
              <input type="text" id="source" required />
            </div>
            <div class="form-group">
              <label for="url">URL:</label>
              <input type="url" id="url" required />
            </div>
            <div class="form-actions">
              <button type="submit" class="btn btn-save">Save</button>
              <button type="button" class="btn btn-cancel" id="cancelBtn">
                Cancel
              </button>
            </div>
          </form>
        </div>
      </div>

      <!-- Confirmation modal for delete -->
      <div id="confirmDeleteModal" class="modal">
        <div class="modal-content">
          <h2>Confirm Delete</h2>
          <p>Are you sure you want to delete this URL?</p>
          <div class="form-actions">
            <button id="confirmDeleteBtn" class="btn btn-delete">Delete</button>
            <button id="cancelDeleteBtn" class="btn btn-cancel">Cancel</button>
          </div>
        </div>
      </div>
    </div>

    <script src="scripts.js"></script>
  </body>
</html>
